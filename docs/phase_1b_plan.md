# Phase 1.b: Windows Debug Executable Production via CI/CD

> **Note:** This plan was generated by Claude (Anthropic's AI assistant) on 2025-12-08.

## Overview
Add capability to produce Windows debug executables from GitHub Actions, enabling debugging on Arch Linux without requiring a Windows Rust development environment.

## Requirements
- Release build with debug = true (optimized with debug symbols)
- Artifact naming: tarkov_stream_producer-windows-{git-sha}.exe
- Trigger: Only on tagged releases (v* tags)
- Platform: Windows only
- Retention: 30 days
- Debug target: Cross-platform debugging on Arch Linux

## Critical Files

1. /home/plaidcat/Projects/Rust_OBS/Cargo.toml - Add release profile
2. /home/plaidcat/Projects/Rust_OBS/.github/workflows/release.yml - NEW FILE
3. /home/plaidcat/Projects/Rust_OBS/CLAUDE.md - Update docs (optional)
4. /home/plaidcat/Projects/Rust_OBS/todo.md - Add Phase 1.b (optional)

## Implementation Steps

### Step 1: Cargo.toml
Add this section:

[profile.release]
debug = true

This enables debug symbols in release builds.

### Step 2: Create .github/workflows/release.yml

Create new workflow file with this content:

name: Release Build

on:
  push:
    tags:
      - 'v*'

jobs:
  build-windows-debug:
    runs-on: windows-latest
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
      
      - name: Install Rust
        uses: dtolnay/rust-toolchain@stable
      
      - name: Build release with debug symbols
        run: cargo build --release --verbose
      
      - name: Rename executable with git SHA
        shell: bash
        run: |
          cp target/release/tarkov_stream_producer.exe tarkov_stream_producer-windows-${{ github.sha }}.exe
      
      - name: Upload Windows debug executable
        uses: actions/upload-artifact@v4
        with:
          name: windows-debug-executable
          path: tarkov_stream_producer-windows-${{ github.sha }}.exe
          retention-days: 7

Key points:
- Triggers only on v* tags
- Windows runner only
- Builds with --release (uses profile.release config)
- Renames with commit SHA
- 7-day retention

### Step 3: Testing

Test with a version tag:
git tag v0.1.0-test
git push origin v0.1.0-test

Verify workflow runs and artifact uploads.

### Step 4: Documentation (Optional)

User can update CLAUDE.md and todo.md to document Phase 1.b completion.

## Testing Checklist
- Workflow triggers only on v* tags
- Windows executable builds successfully
- Artifact has correct naming pattern
- Artifact downloadable from GitHub Actions
- Executable contains debug symbols
- No impact on existing CI

## Technical Notes

Why Release + Debug?
- Optimized performance
- Full debugging on Linux
- Larger binary but manageable

Why Separate Workflow?
- Keeps CI fast
- Clear separation
- Only runs on tags

Why SHA in Filename?
- Exact commit traceability
- Works with any tag format
- No parsing needed

## Summary
Dedicated release workflow triggered by version tags produces Windows debug executables for cross-platform debugging without local Windows development.
